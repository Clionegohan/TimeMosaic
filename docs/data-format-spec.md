# TimeMosaic - データフォーマット仕様

## Markdown フォーマット

### 基本構造

各イベントは以下の形式で記述します：

```markdown
## [年] [イベント名]
#タグ1 #タグ2 ...

[説明文（任意・複数行可）]

---
```

### 詳細仕様

#### 1. 見出し（必須）

```markdown
## 1945 終戦記念日
```

- `##` で始まる（H2 見出し）
- 半角スペースの後に年とイベント名を記述
- 年のフォーマット:
  - **基本**: `YYYY` (例: `1945`)
  - **詳細**: `YYYY-MM-DD` (例: `1945-08-15`)
  - **月まで**: `YYYY-MM` (例: `1945-08`) も許容

#### 2. タグ（必須・最低1つ）

```markdown
#歴史 #日本
```

- `#` で始まるタグを半角スペース区切りで記述
- 最低1つのタグが必須
- 複数タグ推奨（分類の柔軟性向上）

#### 3. 説明文（任意）

```markdown
第二次世界大戦の終結を告げる玉音放送が流れた日。
日本は連合国に対して無条件降伏を受け入れた。
```

- 改行を含む複数行の説明が可能
- Markdown 記法（リンク、強調など）も使用可能

#### 4. 区切り（推奨）

```markdown
---
```

- 各イベント間を `---` で区切る（視認性向上）
- パース時は無視される

### 完全な例

```markdown
## 1945-08-15 終戦記念日
#歴史 #日本 #第二次世界大戦

第二次世界大戦の終結を告げる玉音放送が流れた日。
日本は連合国に対して無条件降伏を受け入れた。

この日を境に、日本の歴史は大きく変わることとなった。

---

## 1969 アポロ11号月面着陸
#科学 #宇宙 #アメリカ

人類初の月面着陸に成功。ニール・アームストロングが「一人の人間にとっては小さな一歩だが、人類にとっては大きな飛躍である」との言葉を残した。

---

## 2024 TimeMosaic プロジェクト開始
#個人 #開発

歴史イベントを視覚化する Web アプリケーション開発開始。
```

## パース仕様

### データモデル

パースされた各イベントは以下の構造を持ちます：

```typescript
interface Event {
  id: string;           // 自動生成（ハッシュなど）
  date: Date | PartialDate; // 日付オブジェクト
  title: string;        // イベント名
  tags: string[];       // タグ配列
  description?: string; // 説明文（オプション）
  raw: string;          // 元の Markdown テキスト
}

type PartialDate = {
  year: number;
  month?: number;
  day?: number;
}
```

### パースロジック

1. Markdown を見出し (`##`) で分割
2. 各見出しから年とタイトルを抽出
3. 次行からタグ行（`#` で始まる）を抽出
4. 残りを説明文として保存
5. `---` は無視

### エラーハンドリング

- 見出しがない場合: スキップ
- 日付パースに失敗: エラーログを出力してスキップ
- タグがない場合: 警告を出力（必須だが厳密には処理続行）

## ファイル構成

### 推奨構造

```
メモディレクトリ/
  ├── history-events.md  ← メインの年表ファイル
  └── ...
```

### 将来的な拡張

- 複数ファイル対応
- ディレクトリ配下の全 `.md` ファイルを自動読み込み
- ファイル名によるカテゴリ自動付与
